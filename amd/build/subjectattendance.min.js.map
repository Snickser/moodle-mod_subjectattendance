{"version":3,"file":"subjectattendance.min.js","sources":["../src/subjectattendance.js"],"sourcesContent":["define(['core/notification'], function(Notification) {\n    return { init: function(cmId) {\n        document.querySelectorAll('select[data-subjectid]').forEach(function(sel) {\n            sel.addEventListener('change', function() {\n                var subjectid=this.dataset.subjectid, userid=this.dataset.userid, status=this.value;\n                var formdata=new FormData();\n                formdata.append('sesskey', M.cfg.sesskey);\n                formdata.append('cmid', cmId);\n                formdata.append('subjectid', subjectid);\n                formdata.append('userid', userid);\n                formdata.append('status', status);\n                fetch(M.cfg.wwwroot+'/mod/subjectattendance/ajax.php',{method:'POST',body:formdata,credentials:'same-origin'})\n                .then(res=>res.json()).then(json=>{\n                    if(json.success){Notification.addNotification({message:'Saved.',level:'success'});}\n                    else{Notification.addNotification({message:'Error',level:'error'});} })\n                .catch(()=>{Notification.addNotification({message:'Network error',level:'error'});});\n            }); }); } } });\n"],"names":["define","Notification","init","cmId","document","querySelectorAll","forEach","sel","addEventListener","subjectid","this","dataset","userid","status","value","formdata","FormData","append","M","cfg","sesskey","fetch","wwwroot","method","body","credentials","then","res","json","success","addNotification","message","level","catch"],"mappings":"AAAAA,iDAAO,CAAC,sBAAsB,SAASC,oBAC5B,CAAEC,KAAM,SAASC,MACpBC,SAASC,iBAAiB,0BAA0BC,SAAQ,SAASC,KACjEA,IAAIC,iBAAiB,UAAU,eACvBC,UAAUC,KAAKC,QAAQF,UAAWG,OAAOF,KAAKC,QAAQC,OAAQC,OAAOH,KAAKI,MAC1EC,SAAS,IAAIC,SACjBD,SAASE,OAAO,UAAWC,EAAEC,IAAIC,SACjCL,SAASE,OAAO,OAAQd,MACxBY,SAASE,OAAO,YAAaR,WAC7BM,SAASE,OAAO,SAAUL,QAC1BG,SAASE,OAAO,SAAUJ,QAC1BQ,MAAMH,EAAEC,IAAIG,QAAQ,kCAAkC,CAACC,OAAO,OAAOC,KAAKT,SAASU,YAAY,gBAC9FC,MAAKC,KAAKA,IAAIC,SAAQF,MAAKE,OACrBA,KAAKC,QAAS5B,aAAa6B,gBAAgB,CAACC,QAAQ,SAASC,MAAM,YACjE/B,aAAa6B,gBAAgB,CAACC,QAAQ,QAAQC,MAAM,aAC5DC,OAAM,KAAKhC,aAAa6B,gBAAgB,CAACC,QAAQ,gBAAgBC,MAAM"}